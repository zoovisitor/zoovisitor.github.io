<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>数据仓库知识梳理 | Blogs</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">数据仓库知识梳理</h1><a id="logo" href="/.">Blogs</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">数据仓库知识梳理</h1><div class="post-meta">Feb 3, 2020<span> | </span><span class="category"><a href="/categories/知识体系/">知识体系</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据建模"><span class="toc-number">1.</span> <span class="toc-text">数据建模</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#建模阶段划分"><span class="toc-number">1.1.</span> <span class="toc-text">建模阶段划分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#业务建模"><span class="toc-number">1.1.1.</span> <span class="toc-text">业务建模</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#领域概念建模"><span class="toc-number">1.1.2.</span> <span class="toc-text">领域概念建模</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#逻辑建模"><span class="toc-number">1.1.3.</span> <span class="toc-text">逻辑建模</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#物理建模"><span class="toc-number">1.1.4.</span> <span class="toc-text">物理建模</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据建模方法"><span class="toc-number">1.2.</span> <span class="toc-text">数据建模方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#范式建模"><span class="toc-number">1.2.1.</span> <span class="toc-text">范式建模</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#维度建模"><span class="toc-number">1.2.2.</span> <span class="toc-text">维度建模</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#实体建模"><span class="toc-number">1.2.3.</span> <span class="toc-text">实体建模</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#宽表模型"><span class="toc-number">1.2.4.</span> <span class="toc-text">宽表模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-Vault模型"><span class="toc-number">1.2.5.</span> <span class="toc-text">Data Vault模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据处理方法"><span class="toc-number">1.3.</span> <span class="toc-text">数据处理方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#缓慢变化维"><span class="toc-number">1.3.1.</span> <span class="toc-text">缓慢变化维</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#拉链表"><span class="toc-number">1.3.2.</span> <span class="toc-text">拉链表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#桥连表"><span class="toc-number">1.3.3.</span> <span class="toc-text">桥连表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#代理键"><span class="toc-number">1.3.4.</span> <span class="toc-text">代理键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一致性维度"><span class="toc-number">1.3.5.</span> <span class="toc-text">一致性维度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建模规范"><span class="toc-number">1.4.</span> <span class="toc-text">建模规范</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#分层规范"><span class="toc-number">1.4.1.</span> <span class="toc-text">分层规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模型设计的基本原则"><span class="toc-number">1.4.2.</span> <span class="toc-text">模型设计的基本原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数仓命名规范"><span class="toc-number">1.4.3.</span> <span class="toc-text">数仓命名规范</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#元数据管理"><span class="toc-number">2.</span> <span class="toc-text">元数据管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据治理"><span class="toc-number">3.</span> <span class="toc-text">数据治理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据安全"><span class="toc-number">3.1.</span> <span class="toc-text">数据安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据质量"><span class="toc-number">3.2.</span> <span class="toc-text">数据质量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文献"><span class="toc-number">4.</span> <span class="toc-text">参考文献</span></a></li></ol></div></div><div class="post-content"><p>数据仓库是面向主题的、集成的、相对稳定的、反映历史变化的数据集合，用于支持管理决策。针对已经存在的不同来源的数据，通过清洗、转化、整合，以商业维度和度量组织数据集，并以便利的⽅式供下游(分析者或业务程序)提取有⽤的商业信息，从⽽及时做出正确的决策的⼀项⼯程。为企业所有级别的决策制定过程，提供所有类型数据支撑的战略集合，主要是用于数据挖掘和数据分析，以建立数据沙盘为基础，为消灭消息孤岛和支持决策为目的而创建的。</p>
<h2 id="数据建模"><a href="#数据建模" class="headerlink" title="数据建模"></a>数据建模</h2><p>数据模型是抽象描述现实世界的一种工具和方法，是通过抽象的实体及实体之间联系的形式，来表示现实世界中事务的相互关系的一种映射。在这里，数据模型表现的抽象的是实体和实体之间的关系，通过对实体和实体之间关系的定义和描述，来表达实际的业务中具体的业务关系。<br>一般来说，数据模型的建设主要能够帮助我们解决以下的一些问题：</p>
<ul>
<li>进行全面的业务梳理，改进业务流程。在业务模型建设的阶段，能够帮助我们的企业或者是管理机关对本单位的业务进行全面的梳理。通过业务模型的建设，我们应该能够全面了解该单位的业务架构图和整个业务的运行情况，能够将业务按照特定的规律进行分门别类和程序化，同时，帮助我们进一步的改进业务的流程，提高业务效率，指导我们的业务部门的生产。</li>
<li>建立全方位的数据视角，消灭信息孤岛和数据差异。通过数据仓库的模型建设，能够为企业提供一个整体的数据视角，不再是各个部门只是关注自己的数据，而且通过模型的建设，勾勒出了部门之间内在的联系，帮助消灭各个部门之间的信息孤岛的问题，更为重要的是，通过数据模型的建设，能够保证整个企业的数据的一致性，各个部门之间数据的差异将会得到有效解决。</li>
<li>解决业务的变动和数据仓库的灵活性。通过数据模型的建设，能够很好的分离出底层技术的实现和上层业务的展现。当上层业务发生变化时，通过数据模型，底层的技术实现可以非常轻松的完成业务的变动，从而达到整个数据仓库系统的灵活性。</li>
<li>帮助数据仓库系统本身的建设。通过数据仓库的模型建设，开发人员和业务人员能够很容易的达成系统建设范围的界定，以及长期目标的规划，从而能够使整个项目组明确当前的任务，加快整个系统建设的速度。</li>
</ul>
<h3 id="建模阶段划分"><a href="#建模阶段划分" class="headerlink" title="建模阶段划分"></a>建模阶段划分</h3><p>针对这几个层次的不同阶段的数据建模的工作的主要内容：<br><img src="/images/dw/stage.jpeg" width="600" alt="数据仓库建模阶段划分"><br>从上图我们可以清楚地看出，数据仓库的数据建模大致分为四个阶段。</p>
<h4 id="业务建模"><a href="#业务建模" class="headerlink" title="业务建模"></a>业务建模</h4><p>这部分建模工作，主要包含以下几个部分：</p>
<ul>
<li>划分整个单位的业务，一般按照业务部门的划分，进行各个部分之间业务工作的界定，理清各业务部门之间的关系。</li>
<li>深入了解各个业务部门的内具体业务流程并将其程序化。</li>
<li>提出修改和改进业务部门工作流程的方法并程序化。</li>
<li>数据建模的范围界定，整个数据仓库项目的目标和阶段划分。</li>
</ul>
<p>业务建模阶段其实是一次和业务人员梳理业务的过程，在这个过程中，不仅能帮助我们技术人员更好的理解业务，另一方面，也能够发现业务流程中的一些不合理的环节，加以改善和改进；业务建模阶段的另一个重要工作就是确定我们数据建模的范围，例如：在某些数据准备不够充分的业务模块内，我们可以考虑先不建设相应的数据模型。等到条件充分成熟的情况下，我们可以再来考虑数据建模的问题。</p>
<h4 id="领域概念建模"><a href="#领域概念建模" class="headerlink" title="领域概念建模"></a>领域概念建模</h4><p>这部分得建模工作，主要包含以下几个部分：</p>
<ul>
<li>抽取关键业务概念，并将之抽象化。</li>
<li>将业务概念分组，按照业务主线聚合类似的分组概念。</li>
<li>细化分组概念，理清分组概念内的业务流程并抽象化。</li>
<li>理清分组概念之间的关联，形成完整的领域概念模型。</li>
</ul>
<p>领域概念建模就是运用了实体建模法，从纷繁的业务表象背后通过实体建模法，抽象出实体，事件，说明等抽象的实体，从而找出业务表象后抽象实体间的相互的关联性，保证了我们数据仓库数据按照数据模型所能达到的一致性和关联性。</p>
<h4 id="逻辑建模"><a href="#逻辑建模" class="headerlink" title="逻辑建模"></a>逻辑建模</h4><p>这部分的建模工作，主要包含以下几个部分：</p>
<ul>
<li>业务概念实体化，并考虑其具体的属性</li>
<li>事件实体化，并考虑其属性内容</li>
<li>说明实体化，并考虑其属性内容</li>
</ul>
<p>在逻辑建模阶段，我们主要考虑得是抽象实体的一些细致的属性。通过逻辑建模阶段，我们才能够将整个概念模型完整串联成一个有机的实体，才能够完整的表达出业务之间的关联性。</p>
<h4 id="物理建模"><a href="#物理建模" class="headerlink" title="物理建模"></a>物理建模</h4><p>这部分得建模工作，主要包含以下几个部分：</p>
<ul>
<li>针对特定物理化平台，做出相应的技术调整</li>
<li>针对模型的性能考虑，对特定平台作出相应的调整</li>
<li>针对管理的需要，结合特定的平台，做出相应的调整</li>
<li>生成最后的执行脚本，并完善之。</li>
</ul>
<p>物理建模阶段是整个数据建模的最后一个过程，这个过程其实是将前面的逻辑数据模型落地的一个过程。</p>
<h3 id="数据建模方法"><a href="#数据建模方法" class="headerlink" title="数据建模方法"></a>数据建模方法</h3><h4 id="范式建模"><a href="#范式建模" class="headerlink" title="范式建模"></a>范式建模</h4><p>范式建模法其实是我们在构建数据模型常用的一个方法，该方法的主要由 Inmon 所提倡，主要解决关系型数据库得数据存储，利用的一种技术层面上的方法。目前，我们在关系型数据库中的建模方法，大部分采用的是三范式建模法。</p>
<p>范式是数据库逻辑模型设计的基本理论，一个关系模型可以从第一范式到第五范式进行无损分解，这个过程也可称为规范化。在数据仓库的模型设计中目前一般采用第三范式，它有着严格的数学定义。从其表达的含义来看，一个符合第三范式的关系必须具有以下三个条件:</p>
<ul>
<li>每个属性值唯一，不具有多义性（保证每个字段取值具备原子性）</li>
<li>每个非主属性必须完全依赖于整个主键，而非主键的一部分（保证一个表只描述一件事）</li>
<li>每个非主属性不能依赖于其他关系中的属性，因为这样的话，这种属性应该归到其他关系中去（保证每列都和主键直接相关，解除传递依赖）</li>
</ul>
<p>以笔者的观点来看，Inmon 的范式建模法的最大优点就是从关系型数据库的角度出发，结合了业务系统的数据模型，能够比较方便的实现数据仓库的建模。但其缺点也是明显的，由于建模方法限定在关系型数据库之上，在某些时候反而限制了整个数据仓库模型的灵活性，性能等，特别是考虑到数据仓库的底层数据向数据集市的数据进行汇总时，需要进行一定的变通才能满足相应的需求。因此，笔者建议读者们在实际的使用中，参考使用这一建模方式。</p>
<h4 id="维度建模"><a href="#维度建模" class="headerlink" title="维度建模"></a>维度建模</h4><p>维度建模法，Kimball 最先提出这一概念。其最简单的描述就是，按照事实表，维表来构建数据仓库，数据集市。这种方法的最被人广泛知晓的名字就是星型模式（Star-schema）。<br><img src="/images/dw/star-schema.jpeg" width="600" alt="维度建模法"><br>上图的这个架构中是典型的星型架构。星型模式之所以广泛被使用，在于针对各个维作了大量的预处理，如按照维进行预先的统计、分类、排序等。通过这些预处理，能够极大的提升数据仓库的处理能力。特别是针对 3NF 的建模方法，星型模式在性能上占据明显的优势。</p>
<p>同时，维度建模法的另外一个优点是，维度建模非常直观，紧紧围绕着业务模型，可以直观的反映出业务模型中的业务问题。不需要经过特别的抽象处理，即可以完成维度建模。这一点也是维度建模的优势。</p>
<p>但是，维度建模法的缺点也是非常明显的，由于在构建星型模式之前需要进行大量的数据预处理，因此会导致大量的数据处理工作。而且，当业务发生变化，需要重新进行维度的定义时，往往需要重新进行维度数据的预处理。而在这些与处理过程中，往往会导致大量的数据冗余。</p>
<p>另外一个维度建模法的缺点就是，如果只是依靠单纯的维度建模，不能保证数据来源的一致性和准确性，而且在数据仓库的底层，不是特别适用于维度建模的方法。</p>
<p>因此以笔者的观点看，维度建模的领域主要适用与数据集市层，它的最大的作用其实是为了解决数据仓库建模中的性能问题。维度建模很难能够提供一个完整地描述真实业务实体之间的复杂关系的抽象方法。</p>
<h4 id="实体建模"><a href="#实体建模" class="headerlink" title="实体建模"></a>实体建模</h4><p>实体建模法并不是数据仓库建模中常见的一个方法，它来源于哲学的一个流派。从哲学的意义上说，客观世界应该是可以细分的，客观世界应该可以分成由一个个实体，以及实体与实体之间的关系组成。那么我们在数据仓库的建模过程中完全可以引入这个抽象的方法，将整个业务也可以划分成一个个的实体，而每个实体之间的关系，以及针对这些关系的说明就是我们数据建模需要做的工作。</p>
<p>虽然实体法粗看起来好像有一些抽象，其实理解起来很容易。即我们可以将任何一个业务过程划分成 3 个部分，实体，事件和说明，如下图所示：<br><img src="/images/dw/entity.jpeg" width="600" alt="维度建模法"></p>
<p>上图表述的是一个抽象的含义，如果我们描述一个简单的事实：“小明开车去学校上学”。以这个业务事实为例，我们可以把“小明”，“学校”看成是一个实体，“上学”描述的是一个业务过程，我们在这里可以抽象为一个具体“事件”，而“开车去”则可以看成是事件“上学”的一个说明。</p>
<p>从上面的举例我们可以了解，我们使用的抽象归纳方法其实很简单，任何业务可以看成 3 个部分：</p>
<ul>
<li>实体，主要指领域模型中特定的概念主体，指发生业务关系的对象。</li>
<li>事件，主要指概念主体之间完成一次业务流程的过程，特指特定的业务过程。</li>
<li>说明，主要是针对实体和事件的特殊说明。</li>
</ul>
<p>由于实体建模法，能够很轻松的实现业务模型的划分，因此，在业务建模阶段和领域概念建模阶段，实体建模法有着广泛的应用。从笔者的经验来看，再没有现成的行业模型的情况下，我们可以采用实体建模的方法，和客户一起理清整个业务的模型，进行领域概念模型的划分，抽象出具体的业务概念，结合客户的使用特点，完全可以创建出一个符合自己需要的数据仓库模型来。</p>
<p>但是，实体建模法也有着自己先天的缺陷，由于实体说明法只是一种抽象客观世界的方法，因此，注定了该建模方法只能局限在业务建模和领域概念建模阶段。因此，到了逻辑建模阶段和物理建模阶段，则是范式建模和维度建模发挥长处的阶段。</p>
<h4 id="宽表模型"><a href="#宽表模型" class="headerlink" title="宽表模型"></a>宽表模型</h4><p>从字面意义上讲就是字段比较多的数据库表。通常是指业务主题相关的指标、维度、属性关联在一起的一张数据库表。由于把不同的内容都放在同一张表存储，宽表已经不符合三范式的模型设计规范，随之带来的主要坏处就是数据的大量冗余，与之相对应的好处就是查询性能的提高与便捷。这种宽表的设计广泛应用于数据挖掘模型训练前的数据准备，通过把相关字段放在同一张表中，可以大大提高数据挖掘模型训练过程中迭代计算时的效率问题。</p>
<h4 id="Data-Vault模型"><a href="#Data-Vault模型" class="headerlink" title="Data Vault模型"></a>Data Vault模型</h4><p>DataVault是在ER模型的基础上衍生而来的，模型设计的初衷是有效的组织基础数据层，使之易扩展、灵活的应对业务变化，同时强调历史性、可追溯性和原子性，不要求对数据进行过度的一致性处理；并非针对分析场景所设计。</p>
<p>Data Vault模型是一种中心辐射式模型，其设计重点围绕着业务键的集成模式，使之易扩展、灵活的应对业务变化，同时强调历史性、可追溯性和原子性，不要求对数据进行过度的一致性处理。这些业务键是存储在多个系统中的、针对各种信息的键，用于定位和唯一标识记录或数据。<br>包含3种基本结构：</p>
<ul>
<li>中心表——Hub<br>  唯一业务键的列表，唯一标识企业实际业务，企业的业务主体集合。</li>
<li>链接表——Link<br>  表示中心表之间的关系，通过链接表串联整个企业的业务关联关系。</li>
<li>卫星表——Satellite<br>  历史的描述性数据，数仓中数据的真正载体。</li>
</ul>
<p><img src="/images/dw/datavault.jpg" width="600" alt="Data Vault示例"></p>
<p>特点：<br>Data Vault模型更容易设计，ETL过程中更易配置化实现。<br>Hub想象成人体的骨架，那么Link就是连接骨架的韧带组织，而satelite就是骨架上的血肉。<br>Data Vault是对ER模型更近一步的规范化，由于对数据的拆解和更偏向于基础数据组织，在处理分析类场景时相对复杂，适合数仓底层构建，目前实际应用场景较少。</p>
<h3 id="数据处理方法"><a href="#数据处理方法" class="headerlink" title="数据处理方法"></a>数据处理方法</h3><h4 id="缓慢变化维"><a href="#缓慢变化维" class="headerlink" title="缓慢变化维"></a>缓慢变化维</h4><p>缓慢变化维的提出是因为在现实世界中，维度的属性并不是静态的，它会随着时间的流失发生缓慢的变化。这种随时间发生变化的维度我们一般称之为缓慢变化维，并且把处理维度表的历史变化信息的问题称为处理缓慢变化维的问题，有时也简称为处理SCD的问题。<br>处理缓慢变化维的方法通常有：</p>
<ul>
<li>直接更新覆盖，仅在旧值无意义时使用</li>
<li>添加一行新的数据，包含生效时间、终止时间和当前的指示符</li>
<li>添加一个新列，记录旧值</li>
<li>微型维：添加一个新维，用于跟踪大型维度表中经常变化的属性</li>
</ul>
<h4 id="拉链表"><a href="#拉链表" class="headerlink" title="拉链表"></a>拉链表</h4><p>拉链表是针对数据仓库设计中表存储数据的方式而定义的，顾名思义，所谓拉链，就是记录历史。记录一个事物从开始，一直到当前状态的所有变化的信息。<br>在数据仓库的数据模型设计过程中，经常会遇到下面这种表的设计：</p>
<ul>
<li>有一些表的数据量很大，比如一张用户表，大约10亿条记录，50个字段，这种表，即使使用ORC压缩，单张表的存储也会超过100G，在HDFS使用双备份或者三备份的话就更大一些</li>
<li>表中的部分字段会被update更新操作，如用户联系方式，产品的描述信息，订单的状态等等</li>
<li>需要查看某一个时间点或者时间段的历史快照信息，比如，查看某一个订单在历史某一个时间点的状态</li>
<li>表中的记录变化的比例和频率不是很大，比如，总共有10亿的用户，每天新增和发生变化的有200万左右，变化的比例占的很小</li>
</ul>
<p>拉链表在使用上基本兼顾了上述的需求。首先它在空间上做了一个取舍，虽说不像方案一那样占用量那么小，但是它每日的增量可能只有方案二的千分之一甚至是万分之一。其次它能满足方案二所能满足的需求，既能获取最新的数据，也能添加筛选条件也获取历史的数据。</p>
<p>拉链表包括effect_begin_date、effect_end_date、is_enable</p>
<h4 id="桥连表"><a href="#桥连表" class="headerlink" title="桥连表"></a>桥连表</h4><p>通过桥连表实现深度可变层次结构，建立在维度表和事实表中间的一个具有较多冗余信息的表。将事实表中一行对应维度表中多行的情况，转变成事实表和桥接表是1对多，桥接表和维表是1对1。</p>
<h4 id="代理键"><a href="#代理键" class="headerlink" title="代理键"></a>代理键</h4><p>代理键的好处：</p>
<ul>
<li>联结处理更加高效</li>
<li>避免由于自然建重新指派带来的冲突</li>
<li>唯一标识与之相关的自然建</li>
<li>避免自然建空值所带来的问题</li>
<li>便于处理缓慢变化维</li>
</ul>
<h4 id="一致性维度"><a href="#一致性维度" class="headerlink" title="一致性维度"></a>一致性维度</h4><p>一致性维度的好处：</p>
<ul>
<li>确保使用一致的过滤口径，结果便于理解</li>
<li>便于集成，可以首先单独计算各个事实表，再在结果集上关联</li>
</ul>
<h3 id="建模规范"><a href="#建模规范" class="headerlink" title="建模规范"></a>建模规范</h3><h4 id="分层规范"><a href="#分层规范" class="headerlink" title="分层规范"></a>分层规范</h4><p>在未分层的情况下，数据之间的耦合性与业务耦合性是不可避免的，当源业务系统的业务规则发生变化时，可能影响整个数据的清洗过程。</p>
<ul>
<li>数据分层简化了数据清洗的过程，每一层的逻辑变得更加简单和易于理解，当发生错误或规则变化时，只需要进行局部调整</li>
<li>通过大量的预处理来提升应用系统查询速度，进而提升的用户体验，因此数据仓库会冗余大量的数据，是典型的空间换时间的策略<br><img src="/images/dw/layered.jpg" width="600" alt="阿里数据仓库分层介绍"></li>
</ul>
<h4 id="模型设计的基本原则"><a href="#模型设计的基本原则" class="headerlink" title="模型设计的基本原则"></a>模型设计的基本原则</h4><ul>
<li><p>高内聚和低耦合，一个逻辑和物理模型由哪些记录和字段组成，应该遵循最基本的软件设计方法论中的高内聚和低耦合原则。主要从数据业务特性和访问特性两个角度来考虑：将业务相近或者相关的数据、粒度相同数据设计为一个逻辑或者物理模型；将高概率同时访问的数据放一起，将低概率同时访问的数据分开存储</p>
</li>
<li><p>核心模型与扩展模型分离，建立核心模型与扩展模型体系，核心模型包括的字段支持常用核心的业务，扩展模型包括的字段支持个性化或是少量应用的需要。在必须让核心模型与扩展模型做关联时，不能让扩展字段过度侵入核心模型，以免破坏了核心模型的架构简洁性与可维护性</p>
</li>
<li><p>公共处理逻辑下沉及单一，底层公用的处理逻辑应该在数据调度依赖的底层进行封装与实现，不要让公用的处理逻辑暴露给应用层实现，不要让公共逻辑在多处同时存在</p>
</li>
<li><p>成本与性能平衡，适当的数据冗余可换取查询和刷新性能，不宜过度冗余与数据复制</p>
</li>
<li><p>数据可回滚，处理逻辑不变，在不同时间多次运行数据的结果需确定不变</p>
</li>
<li><p>一致性，相同的字段在不同表中的字段名必须相同</p>
</li>
<li><p>命名清晰可理解，表命名规范需清晰、一致，表命名需易于下游的理解和使用。</p>
</li>
</ul>
<h4 id="数仓命名规范"><a href="#数仓命名规范" class="headerlink" title="数仓命名规范"></a>数仓命名规范</h4><ul>
<li>通用规范（长度、拼写、分割、层次、冲突、表意要求）</li>
<li>表名规范（分层标识、业务标识、统计时间周期、更新周期标识、单分区增量全量标识）</li>
<li>词根规范（业务线、数据粒度、数据周期）</li>
</ul>
<h2 id="元数据管理"><a href="#元数据管理" class="headerlink" title="元数据管理"></a>元数据管理</h2><ul>
<li>数据源信息，包括数据源地址、表名、版本等</li>
<li>存储信息，包括生命周期、数据结构、管理信息、数据描述等</li>
<li>计算信息，包括血缘关系、执行状态、执行日志、调度策略等</li>
<li>质量信息，包括完整性、准确性、就绪时间等</li>
<li>使用信息，包括表访问、字段访问、查询时长、查询方式等</li>
<li>成本信息，包括计算成本、存储成本等</li>
<li>安全信息，包括安全等级、数据敏感性、权限管理等</li>
<li>模型信息，包括业务过程、数据域、维度、粒度、事实、指标口径等</li>
</ul>
<h2 id="数据治理"><a href="#数据治理" class="headerlink" title="数据治理"></a>数据治理</h2><h3 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h3><ul>
<li>数据的产生：通过数据分级体系对敏感字段打标签</li>
<li>数据的存储：需要通过加密的方式存储相关数据，避免直接存储Text格式的数据</li>
<li>数据的使用：包括了一个独立的权限控制系统</li>
<li>数据的传输：相关的申请与查询操作需要通过专门的API接口进行，并且有高安全等级的加密措施</li>
<li>数据的展示：在申请通过后，根据申请人的安全等级，展示对应等级的数据</li>
<li>数据的销毁：敏感数据仅在HDFS上做逻辑删除是不够的，需要配合物理删除同步清理敏感数据</li>
</ul>
<h3 id="数据质量"><a href="#数据质量" class="headerlink" title="数据质量"></a>数据质量</h3><p>数据质量是保证数据应用的基础，它的评估标准主要包括四个方面，完整性、一致性、准确性、及时性。评估数据是否达到预期设定的质量要求，就可以通过这四个方面来进行判断。</p>
<ul>
<li>完整性，完整性指的是数据信息是否存在缺失的状况，数据缺失的情况可能是整个数据记录缺失，也可能是数据中某个字段信息的记录缺失。不完整的数据所能借鉴的价值就会大大降低，也是数据质量更为基础的一项评估标准</li>
<li>一致性，一致性是指数据是否遵循了统一的规范，数据集合是否保持了统一的格式，数据质量的一致性主要体现在数据记录的规范和数据是否符合逻辑。规范指的是，一项数据存在它特定的格式，例如手机号码一定是13位的数字，IP地址一定 是由4个0到255间的数字加上”.”组成的。逻辑指的是，多项数据间存在着固定的逻辑关系，例如PV一定是大于等于UV的，跳出率一定是在0到1之间的</li>
<li>准确性，准确性是指数据记录的信息是否存在异常或错误。和一致性不一样，存在准确性问题的数据不仅仅只是规则上的不一致。更为常见的数据准确性错误就如乱码。其次，异常的大或者小的数据也是不符合条件的数据</li>
<li>及时性，及时性是指数据从产生到可以查看的时间间隔，也叫数据的延时时长。及时性对于数据分析本身要求并不高，但如果数据分析周期加上数据建立的时间过长，就可能导致分析得出的结论失去了借鉴意义</li>
</ul>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul>
<li>IBM 浅谈数据仓库建设中的数据建模方法：<a href="https://www.ibm.com/developerworks/cn/data/library/techarticles/dm-0803zhousb/" target="_blank" rel="external">https://www.ibm.com/developerworks/cn/data/library/techarticles/dm-0803zhousb/</a></li>
<li>一位阿里人对数据模型建设的几点思考与总结：<a href="https://blog.csdn.net/nisjlvhudy/article/details/47758749" target="_blank" rel="external">https://blog.csdn.net/nisjlvhudy/article/details/47758749</a></li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2020/02/03/知识体系-数据仓库知识梳理/" data-id="ck8sm2ygj000bujufl0i928a6" class="article-share-link">分享</a><div class="tags"></div><div class="post-nav"><a href="/2020/02/03/知识体系-常见算法知识梳理/" class="pre">知识体系-常见算法知识梳理</a><a href="/2017/08/10/Hadoop数据完整性/" class="next">Hadoop的I/O操作</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/知识体系/">知识体系</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/02/03/知识体系-其他常用知识梳理/">知识体系-其他常用知识梳理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/03/知识体系-编程语言高频知识梳理/">知识体系-编程语言高频知识梳理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/03/知识体系-大数据处理常见问题梳理/">大数据处理常见问题梳理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/03/知识体系-常见算法知识梳理/">知识体系-常见算法知识梳理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/03/知识体系-数据仓库知识梳理/">数据仓库知识梳理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/10/Hadoop数据完整性/">Hadoop的I/O操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/30/Hadoop分布式文件系统（HDFS）/">Hadoop分布式文件系统（HDFS）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/30/Hadoop参数调优/">Hadoop参数调优</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Blogs.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>